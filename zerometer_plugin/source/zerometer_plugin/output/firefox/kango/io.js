function getPublicApi(){return utils.createApiWrapper(module.exports,IOBase.prototype)}var utils=require("kango/utils"),NotImplementedException=utils.NotImplementedException,IOBase=function(){};IOBase.prototype={getExtensionFileUrl:function(e){throw new NotImplementedException},isLocalUrl:function(e){return-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&-1==e.indexOf("ftp://")},getFileUrl:function(e){return this.isLocalUrl(e)&&(e=this.getExtensionFileUrl(e)),e},getExtensionFileContents:function(e){var t=new XMLHttpRequest;t.open("GET",this.getExtensionFileUrl(e),!1),"undefined"!=typeof t.overrideMimeType&&t.overrideMimeType("text/plain");try{return t.send(null),t.responseText}catch(n){return null}},getResourceUrl:function(e){throw new NotImplementedException}};







function IO(){this._rootName=extensionInfo.package_id,this._init()}var extensionInfo=require("kango/extension_info"),utils=require("kango/utils"),object=utils.object;IO.prototype=object.extend(IOBase,{_registerResourceProtocol:function(){var e=Services.io.getProtocolHandler("resource").QueryInterface(Ci.nsIResProtocolHandler),o=Services.io.newFileURI(__installPath);__installPath.isDirectory()||(o=Services.io.newURI("jar:"+o.spec+"!/",null,null)),e.setSubstitution(this._rootName,o)},_unregisterResourceProtocol:function(){var e=Services.io.getProtocolHandler("resource").QueryInterface(Ci.nsIResProtocolHandler);e.setSubstitution(this._rootName,null)},_init:function(){this._registerResourceProtocol()},dispose:function(){this._unregisterResourceProtocol()},getExtensionFileUrl:function(e){return"chrome://"+this._rootName+"/content/"+e},getResourceUrl:function(e){return"resource://"+this._rootName+"/"+e}}),module.exports=new IO,module.exports.getPublicApi=getPublicApi;